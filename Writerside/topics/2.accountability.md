# 2. Ответственность (Accountability)

Понятие подотчетности применяется, когда человек или организация несет ответственность перед другим человеком. Это абстрактное понятие, которое может отражать множество конкретных вопросов, включая организационные структуры, контракты и трудоустройство. 

 Эта глава начинается с введения важного паттерна _Часть/Сторона_ ([2.1](2.accountability.md#2-1-party)) — супертипа человека и организации. Затем на примере проблемы организационной структуры показано развитие модели ответственности. Простые организационные структуры могут быть смоделированы с помощью _организационных иерархий_ ([2.2](2.accountability.md#2-2-organization-hierarchies)). Когда развивается множество иерархий, модель становится слишком сложной, и требуется модель _организационной структуры_ ([2.3](2.accountability.md#2-3-organization-structures)). Комбинация моделей стороны и организационной структуры дает _ответственность_ ([2.4](2.accountability.md#2-4-accountability)). Ответственность может регулировать многие отношения между сторонами: организационные структуры, согласие пациента, контракты на оказание услуг, трудоустройство и регистрацию в профессиональных организациях. 

 При использовании ответственности важно описать, какие виды ответственности могут быть сформированы, и правила, которые ограничивают эту ответственность. Эти правила могут быть описаны экземплярами типов на уровне знаний о ответственности ([2.5](2.accountability.md#2-5-accountability-knowledge-level)). Этот уровень включает тип Сторона, что позволяет классифицировать и использовать дочерние типы сторон с помощью _обобщений сторон_ ([2.6](2.accountability.md#2-6-party-type-generalization)) без изменения модели. _Иерархическая ответственность_ ([2.7](2.accountability.md#2-7-hierarchic-accountability)) представляет отношения между сторонами, которые требуют строгой иерархии. Таким образом, ответственность может использоваться как для иерархических, так и для более сложных сетей отношений. 

 Ответственность определяет обязанности сторон. Эти обязанности могут быть определены через _операционные области_ ([2.8](2.accountability.md#2-8-operating-scopes)). Операционные области — это пункты договора об ответственности, скорее, как позиции в текущем заказе. По мере накопления этих обязанностей может быть полезно прикрепить их к _должности_ ([2.9](2.accountability.md#2-9-post)), а не к конкретному человеку.  

 Эта глава основана на многочисленных проектах в которых общей темой является Ответственность. Оригинальные идеи были разработаны в рамках проекта по обслуживанию клиентов для коммунального предприятия и проекта по бухгалтерскому учету для телефонной компании. Модель ответственности была разработана в проекте Cosmos для Национальной службы здравоохранения Великобритании [2]. 

<note>
    <p>
        <b>Ключевые понятия:</b> Сторона/Часть, Ответственность  
    </p>
</note>

<deflist type="narrow">
    <def title="Ключевые понятия">
        Сторона/Часть, Ответственность 
    </def>
</deflist>
 
## 2.1 Сторона (Party)

Просмотрите свою адресную книгу, и что вы там увидите? Если она похожа на мою, вы увидите множество адресов, телефонных номеров, странных адресов электронной почты... все они связаны с чем-то. Часто это что-то — человек, но время от времени появляются компании. Я часто звоню в "Городское такси", но там нет конкретного человека, с которым я хочу поговорить, — я просто хочу вызвать такси. Первой попыткой смоделировать адресную книгу мог бы стать рисунок 2.1, но в нем есть дублирование, которое больно бьет по глазам. Инстинктивно я ищу обобщение человека и компании. Это — классический случай неназванного понятия, которое все знают и используют, но ни у кого нет для него названия. Я видел его в бесчисленных моделях данных под разными названиями: человек/организация, игрок, юридическое лицо и так далее.  

![2.1.png](2.1.png){id="img2.1"}

_Эта модель демонстрирует схожие обязанности человека и организации._

**Рисунок 2.1 Первоначальная модель адресной книги.**

 Я предпочитаю термин "Сторона". На рисунке 2.2 я определяю сторону как супертип для человека или организации. Это позволяет мне иметь адреса и номера телефонов для отделов компаний или даже неформальных команд.  

![2.2.png](2.2.png){id="img2.2"}

_Сторону следует использовать во многих ситуациях, когда речь идет о человеке или организации._ 

**Рисунок 2.2 [Рисунок 2.1](2.accountability.md#img2.1) обобщен с помощью Части.** 

Удивительно, как много вещей связано с Частью, а не с человеком или организацией. Вы получаете и отправляете письма как людям, так и организационным единицам; я совершаю платежи людям и организациям; как организации, так и люди совершают действия, имеют банковские счета, платят налоги. Этих примеров, я думаю, достаточно, чтобы абстракция была оправдана. 

 **Пример** В Национальной службе здравоохранения Великобритании сторонами были бы следующие лица: Доктор Том Кэрнс, команда почечного отделения больницы Святой Марии, больница Святой Марии, районное управление здравоохранения Парксайда и Королевский колледж врачей. 


## 2.2 Иерархии организаций (Organization Hierarchies)

Рассмотрим типовую транснациональную корпорацию: Aroma Coffee Makers, Inc. (ACM). У нее есть операционные подразделения, которые делятся на регионы, те делятся на дивизионы, которые состоят из офисов продаж. Мы можем смоделировать эту простую структуру с помощью рисунка 2.3. 

![2.3.png](2.3.png){id="img2.3"}

_Такая структура не является гибкой и не подлежит повторному использованию._

**Рисунок 2.3 Организационная структура с четко определенными уровнями.**

Однако это не та модель, которой я был бы доволен. Если организация изменится, скажем, регионы будут удалены, чтобы создать более плоскую структуру, то мы должны изменить модель. На рисунке 2.4 представлена более простая модель, которую легче изменить. 

![2.4.png](2.4.png){id="img2.4"}

_Иерархическая ассоциация обеспечивает наибольшую гибкость. Ограничения, связанные с уровнями, должны быть добавлены как правила для подтипов._ 

**Рисунок 2.4 Супертип организации с иерархическими отношениями.** 

Опасность рекурсивных отношений, показанных на рисунке 2.4, заключается в том, что они позволяют подразделению быть частью офиса продаж. С этим можно справиться, определив подтипы, соответствующие уровням, и наложив ограничения на эти подтипы. Если организационная иерархия изменится, мы изменим эти подтипы и правила. Обычно проще изменить правило, чем структуру модели, поэтому я предпочитаю рисунок 2.4, а не [рисунок 2.3](2.accountability.md#img2.3).   

 Иерархическая структура обеспечивает определенную степень общности, но имеет ряд ограничений, включая тот факт, что она поддерживает только одну организационную иерархию. Предположим, что компания <tooltip term="ACM">ACM</tooltip> прикрепляет к своим офисам продаж группы по обслуживанию основных линий кофеварок. Эти команды имеют двойную структуру отчетности: Они отчитываются перед отделом продаж, а также перед отделами обслуживания по каждому семейству продуктов, которые, в свою очередь, отчитываются перед подразделениями поддержки по типу продукта. Так, команда по обслуживанию высокопроизводительного капучинатора 2176 в Бостоне (50 капучино в минуту) подчиняется бостонскому офису продаж, но также и сервисному центру семейства 2170, который подчиняется итальянскому кофейному подразделению, которое подчиняется подразделению обслуживания высокопроизводительных кофейных машин, которое подчиняется подразделению обслуживания кофейных машин. (Я не выдумал все это!) Столкнувшись с такой ситуацией, мы можем добавить вторую иерархию, как показано на рис. 2.5. (Потребуется больше правил, аналогичных тем, что на рисунке 2.4, но я оставлю их добавление на усмотрение читателя). В нынешнем виде этот подход работает хорошо, но с появлением большего количества иерархий структура станет громоздкой.  

![2.5.png](2.5.png){id="img2.5"}

_Подтипы организации не отображаются. Если иерархий много, это быстро выйдет из-под контроля._ 

**Рисунок 2.5 Две организационные иерархии.** 

## 2.3 Организационные структуры (Organization Structures)

 Если кажется, что в модели будет несколько иерархий, мы можем использовать типизированные отношения, как показано на рис. 2.6. Мы превращаем иерархические ассоциации в тип и различаем иерархии, используя различные экземпляры типа организационной структуры. В приведенном выше сценарии можно использовать два экземпляра типа организационной структуры: организация продаж и организация обслуживания. Дополнительные иерархии могут быть добавлены просто путем добавления дополнительных типов организационных структур. И снова эта абстракция дает нам больше гибкости при незначительном увеличении сложности. Для двух иерархий это не будет стоить усилий, но для нескольких — будет. Обратите внимание, что организационная структура имеет временной период; это позволяет нам регистрировать изменения в организационной структуре с течением времени. Обратите внимание, что я не смоделировал тип организационной структуры как атрибут — очень важный фактор при работе с атрибутами типа, как мы увидим позже. 

![2.6.png](2.6.png){id="img2.6"}

_Каждая взаимосвязь между организациями определяется типом организационной структуры. Это лучше, чем явные ассоциации, если существует много взаимосвязей._

**Рисунок 2.6 Использование типизированных отношений.** 

**Пример** Сервисная группа по обслуживанию высокопроизводительного капучинатора 2176 в Бостоне подчиняется бостонскому офису продаж. Мы смоделируем это как организационную структуру, материнским подразделением которой будет офис продаж в Бостоне, дочерним — сервисная группа 2176 в Бостоне, а тип организационной структуры — линейное управление. 

 **Пример** Сервисная группа для высокопроизводительной машины для приготовления капучино 2176 в Бостоне также отчитывается перед сервисным центром семейства 2170 в структуре поддержки продукции. Мы смоделируем это как отдельную организационную структуру, родительской является сервисный центр семейства 2170, дочерней — сервисная группа 2176 в Бостоне, а тип организационной структуры — поддержка продукции. 

 Упрощение структуры объектов делает больший акцент на правилах. Правила имеют вид: "Если у нас есть организационная структура, тип которой — организация продаж, а дочерний объект — подразделение, то родитель должен быть регионом". Обратите внимание, что правила выражаются через ссылки на свойства организации лучше, чем через явные ассоциации, если существует много отношений. Однако это означает, что расширение системы путем добавления нового типа организационной структуры потребует изменения правил в организационной структуре. Кроме того, при увеличении числа типов организационной структуры правила станут очень громоздкими.  

Вместо этого правила могут быть размещены вне типе организационной структуры, как показано на [рис. 2.7](2.accountability.md#img2.7). Все правила для конкретного типа организационной структуры хранятся в одном месте, и можно легко добавлять новые типы организационной структуры. 

 Однако [рисунок 2.7](2.accountability.md#img2.7) не будет работать хорошо, если мы редко меняем типы организационной структуры, но часто добавляем новые подтипы организаций. В этом случае каждое добавление подтипа организации будет приводить к изменению правил. Лучше поместить правила на подтипы организации. Общий смысл заключается в том, чтобы свести к минимуму происходящие изменения модели. Таким образом, мы должны разместить правила в наиболее изменчивой области таким образом, чтобы не затрагивать другие части модели. 

<tip>
    <p>
        <b>Принцип моделирования</b>
    </p>
    <p>Разработайте модель таким образом, чтобы наиболее частая модификация модели приводила к изменению наименьшего количества типов.</p>
</tip>

## 2.4 Accountability 

![2.7.png](2.7.png){id="img2.7"}


## 2.5 Accountability Knowledge Level 

## 2.6 Party Type Generalization 

## 2.7 Hierarchic Accountability

## 2.8 Operating Scopes

## 2.9 Post

## References