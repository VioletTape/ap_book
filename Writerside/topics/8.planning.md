# 8. Планирование

<secondary-label ref="wip"/>

 Планирование - жизненно важная часть любого крупного начинания. Многие менеджеры тратят большую часть своего времени на разработку и отслеживание планов. В этой главе представлены некоторые базовые схемы планирования. В ней описаны как отдельные планы, так и протоколы - стандартные процедуры, которые можно использовать многократно. 

 Любое действие, выполняемое в пределах домена, может быть записано. Шаблон _предложенное и выполненное действие_ (8.1) делит возможные состояния действия на два ключевых подтипа, которые представляют намерение и то, что происходит на самом деле. Завершение действия аналогичным образом делится на _завершенное и отмененное_ (8.2). Отмененное действие представляет собой окончательную отмену действия, а временное удержание действия представлено в виде _приостановки_ (8.3). 

 _План_ (8.4) используется для хранения группы предлагаемых действий. Мы обсуждаем структуры планов, которые фиксируют зависимость и последовательность группы действий, позволяя одному действию появляться в нескольких планах. Последнее свойство важно для хореографии нескольких планов, которые являются одноразовыми. _Протокол_ (8.5) используется для стандартных планов, которые повторяются много раз. 

 Выполнение действия требует ресурсов. Шаблон _распределения ресурсов_ (8.6) описывает протоколы для предлагаемых и выполняемых действий. Мы рассматриваем два различных вида ресурсов: _расходные материалы_ - используются во время выполнения действий, и _активы_ - используются в течение долгого времени. 

 До сих пор наше обсуждение планов было сосредоточено на планировании и мониторинге действий и игнорировало последствия этих действий. Последний паттерн, который мы обсудим - это _функции результата и начала_ (8.7), которые связывают паттерны этой главы с паттернами наблюдения и измерения, разработанными в [главе 3](3.observations-measurements.md). Эти функции позволяют нам сказать, чего, по нашему мнению, достигло действие (результат), чего должен достичь протокол (функция результата) и какие условия заставляют нас хотеть начать протокол (функция начала).  

 Планирование - сложная область, и схемы, представленные в этой главе, даже в большей степени, чем в других главах, не претендуют на полноту. Паттерны были разработаны на основе модели клинических процессов Cosmos [[1](#references)], и ее разработка наложила явный отпечаток в направлениях, поддерживающих планирование здравоохранения. Ресурсная часть появилась в результате неопубликованных обсуждений с разработчиками и пользователями Cosmos, а также под влиянием "Общей базовой спецификации NHS" [[2](references-1.md)]. 

<deflist type="narrow">
    <def title="Ключевые понятия">
         Предлагаемое действие, реализуемое действие, план, приостановка, распределение ресурсов, актив, расходный материал, временный ресурс, функция начала, функция конца.
    </def>
</deflist>

## 8.1 Предложенные и завершённые действия

 Основа любого плана состоит из основных предпринимаемых действий. Трудно дать сколько-нибудь полное описание того, что составляет действие. План может быть грубым, состоящим из больших действий, или детальным, состоящим из маленьких действий. Действия могут обладать целым рядом свойств, основанных на том, кто, когда и где. С такими грубыми свойствами трудно обеспечить больше, чем самые общие термины: сторона, временная привязка и местоположение, как показано на рисунке 8.1.  

![](8.1.png){id="img8.1"}

 **Рисунок 8.1. Свойства действия.**  

 При составлении планов и контроле за их выполнением мы должны учитывать множество состояний, в которых может находиться действие. Оно может быть запланировано, обеспечено ресурсами, назначено ответственным лицам, начато и завершено. Диаграмма переходов между состояниями позволяет записать эти состояния и то, как могут происходить переходы. Трудно выработать какие-либо правила относительно этих переходов. Планирование действия и обеспечение его ресурсами могут происходить в любом порядке. Поверхностный анализ может привести к выводу, что действие не может быть начато до выделения ресурсов и составления расписания. Как быть с действиями, которые начинаются до принятия формального решения об определении времени их выполнения? Можно утверждать, что такие действия планируются за мгновение до их начала, но это больше похоже на рационализацию теории управления, чем на отражение реального бизнес-процесса. Другая проблема возникает при частичном выделении ресурсов. Любой менеджер проекта скажет вам, что в реальном мире задачи часто начинаются до того, как будут выделены все необходимые ресурсы. Как мы можем отразить эту ситуацию в описании состояний действий? 

 Два важных состояния действия - это предложенное и выполненное действия, как показано на [рис. 8.2](#img8.2). Предложенное действие - это просто предложение, существующее в некотором плане. Как таковое, оно может быть запланировано путем добавления временной привязки, обеспечено ресурсами путем добавления сторон и размещено в соответствующем месте. Эти изменения могут быть сделаны в любое время и в любом порядке. Как только действие начато, оно реализуется. При этом происходит не только изменение состояния, но и создается отдельный объект реализованного действия. Это позволяет нам фиксировать различия между планом и реализацией. Сохранив первоначальное предложенное действие, мы можем увидеть различия между планом и реальностью. Например, типичным отличием является временная привязка; однако любой атрибут может изменяться по мере того, как документы планирования превращаются в действия.  

![](8.2.png){id="img8.2"} 

_Отдельные объекты фиксируют предложение и реализацию, чтобы можно было отслеживать различия._

 **Рисунок 8.2. Базовая структура планов и действий.**   

 **Пример:** Я решил подготовить презентацию для <tooltip term="OOPSLA">OOPSLA</tooltip> 1 июля 1997 года, но не успеваю сделать это до 3 июля. Эти действия можно представить в виде предложенного действия с датой 1 июля и выполненного действия с датой 3 июля. Все остальные атрибуты предложенного действия одинаковы. 

 Мы можем предоставить производное свойство состояния действия, чтобы было проще определить, в каком состоянии находится действие, без навигации по различным структурам, которые записывают его состояние. На данном этапе в этом нет необходимости, но это станет ценным, когда мы рассмотрим дополнительные структуры позже. 

 Чтобы сохранить максимальную гибкость при записи ежедневных действий, связи между предложенным и выполненным действием, как показано на [рис. 8.2](#img8.2), являются необязательными. Часто самые лучшие планы пылятся без реализации, и многие действия происходят без предварительного планирования. Мы не должны поддаваться искушению рационализировать планы, составленные в последнюю минуту. 

 **Пример:** Доктор Терсз заказывает полный анализ крови для Джона Смита, но пациент не приходит на анализ. Это представляет собой предложенное действие без реализованного действия. Если пациент повторно записывается на более позднюю дату, это представляет собой новое предложенное действие. 

 **Пример:** Врача Кэрнса вызывают к женщине, которой внезапно стало плохо в поезде. Здесь есть реализованное действие, но нет предложенного действия.  

## 8.2 Законченные и отмененные действия

До сих пор мы рассматривали, как предлагаются и начинаются действия, но не то, чем они могут закончиться. Очевидно, что действия либо преуспевают, либо терпят неудачу. Проблема в том, что часто мы не можем с уверенностью определить успех или неудачу, особенно в здравоохранении. Поэтому в этом разделе мы рассмотрим только два варианта завершения действий: завершение и отказ. Завершение происходит, когда действие выполняется в соответствии с планом. Любое рассмотрение успеха или неудачи оставлено для дальнейшего анализа (см. раздел 8.7). Это определение может быть слишком строгим для областей, отличных от здравоохранения, где успех легче оценить. Однако различие между выполнением действия в соответствии с планом и достижением цели все же ценно.  

![](8.3.png){id="img8.3"}  

 **Рисунок 8.3.** Завершенные и заброшенные действия.  

 Отказ - это полное и окончательное прекращение действия. Оно может произойти как до, так и после начала реализации действия. Отказ от предложенного действия - это решение не начинать его вообще. 

 **Пример:** Трансплантация почки обеспечивает почечную функцию путем замены поврежденной почки на донорскую рабочую почку. Операция по пересадке почки считается успешной, если почка благополучно пересажена реципиенту. Если впоследствии почка отторгается, это не аннулирует успех процедуры трансплантации. Процедура трансплантации все равно завершена, от нее можно отказаться, только если во время операции возникнут проблемы. 

 **Пример:** Я решил лететь из Лондона в Бостон, рассчитывая прибыть в Бостон в 14:00. Рейс задержали, поэтому я прибыл только в 19:00. Это действие все равно было выполнено, потому что я прибыл в Бостон в тот же день. Задержка рейса означает, что оно не было успешным. Однако от предложенного действия - пойти поужинать в тот вечер - пришлось отказаться. 

 **Пример:** Мой автомобиль не заводился, и я определил, что проблема заключается в неисправном двигателе стартера. Поэтому я предложил и начал замену двигателя стартера. Сразу после начала работы я обнаружил, что на самом деле проблема заключалась в плохом соединении, а двигатель стартера был в порядке. Поэтому я отказался от замены стартера, хотя и был недоволен результатом!  


## 8.3 Приостановленные действия

 Мы также можем откладывать действия, намереваясь продолжить их позже. В этом случае с действием связывается приостановка, как показано на рис. 8.4. Приостановка действует в течение своего периода времени (который может быть открытым). Если действие продолжается после окончания срока приостановки, то приостановка все еще существует, но уже не является отсрочкой, и действие продолжается.  

![](8.4.png){id="img8.4"}  

 **Рисунок 8.4. Приостановка действий.**  

 Таким образом, действие приостановлено, если в данный момент оно открыто. Приостановить можно как предложенные, так и выполненные действия; приостановка предложенного действия эквивалентна отсрочке начала действия. 

 **Пример:** Пациент находится в листе ожидания на пересадку почки. Это представлено предложным действием renal transplant. Пациент должен ждать, пока почка станет доступной. Если во время ожидания у пациента развивается простуда, врач должен наложить на пациента временный запрет. Трансплантация не отменяется, поскольку пациент возвращается в лист ожидания, когда простуда проходит. Запись о приостановке трансплантации необходима для того, чтобы объяснить, почему врач не предоставил пациенту подходящую почку в течение этого времени. 

 **Пример:** У меня есть предложение помыть посуду. Оно часто приостанавливается надолго, но я никогда не отказываюсь от него!  

 ### 8.4 План 

 В самом простом смысле план - это набор предлагаемых действий, связанных в некоторой последовательности. Последовательность может быть выражена различными способами, но чаще всего она выражается в виде зависимости - указания на то, что одно действие не может начаться, пока не завершится другое. Планы часто описываются с помощью диаграммы зависимостей, как в анализе критического пути. 

 Рисунок 8.5 представляет собой диаграмму зависимости между предлагаемыми действиями. Такая структура полезна, когда действия всегда предлагаются как часть одного плана. Однако во многих ситуациях планы взаимодействуют. Когда врач составляет план лечения пациента, действия, входящие в этот план, используются медсестрами при составлении планов ухода. Нет ничего необычного в том, что у многих ухаживающих за пациентом лиц есть свои планы, и важно, чтобы эти планы были правильно составлены. Структура, показанная на рис. 8.6, поддерживает взаимодействие, позволяя ссылаться на действие в нескольких планах, а зависимости выстраивать между ссылками, а не между действиями.  

![](8.5.png){id="img8.5"} 

_Это позволит предлагать действия только в рамках одного плана, что затруднит координацию планов._

 **Рисунок 8.5. Зависимости между предлагаемыми действиями.** 


 **Пример:** Врачу нужен полный анализ крови для пациента. Она проверяет список предложенных действий и обнаруживает, что другой врач уже предложил полный анализ крови как часть своего плана. Это представлено в виде плана другого врача, в котором есть ссылка на действие, предлагающее полный анализ крови. Можно создать новый план с новой ссылкой на то же предложенное действие.  

![](8.6.png){id="img8.6"} 

_Такая структура позволяет ссылаться на действия в нескольких планах._

 **Рисунок 8.6. План, состоящий из ссылок на предлагаемые действия.**   

 **Пример:** Мне нужно зайти в винный магазин, чтобы купить немного St. Emillion для ужина в субботу и Old Peculiar для вечеринки в воскресенье. Действие посещения винного магазина упоминается как в плане подготовки к ужину, так и в плане вечеринки. Ссылка на подготовку к ужину имеет зависимость, где посещение ужина является следствием, а посещение винного магазина - зависимостью. Ссылка на план вечеринки имеет зависимость, в которой начало вечеринки является следствием, а посещение винного магазина - зависимостью.  

 Такое понятие действия и ссылки на действие в описании поведения является общим шаблоном в поведенческом моделировании. Это аналогично определению подпрограммы и ее вызову в рамках другой подпрограммы. Определение подпрограммы не содержит информации о том, как она используется в вызывающей программе. Вызывающая программа не знает о содержимом подпрограммы. 

 Модель на [рис. 8.6](#img8.6) представляет собой простую поведенческую метамодель. План - это описание предполагаемого поведения, поэтому здесь уместна техника поведенческого моделирования. Мы можем использовать любую технику поведенческого моделирования. Сначала мы представляем технику с помощью ее метамодели. Затем мы привязываем действия мета-модели к объекту плана и к предлагаемым действиям. Мы должны выбрать такую поведенческую модель, которая была бы сложной, но не чрезмерно сложной. 

 Планы всегда подвержены изменениям и могут быть заменены другими планами, как показано на рис. 8.7. Ассоциация является многозначной в обоих направлениях - по мере изменения планов один план может быть разделен и заменен отдельными планами, или несколько планов могут быть объединены в один.  

![](8.7.png){id="img8.7"}

 **Рисунок 8.7. Планы замены.**  

 **Пример:** У меня есть план купить хлеб в "Райском саду" и сыр в "Хлеба и круга". Вместо этого я планирую купить хлеб на вынос в Jae's.  

 Мы можем рассматривать план как подтип действия, как показано на рис. 8.8. Таким образом, мы можем предлагать план (то есть планировать план) и следить за выполнением плана, чтобы узнать, завершен ли он. Поскольку планирование часто бывает довольно сложным, очень важно иметь возможность планировать и отслеживать ход выполнения плана.  

![](8.8.png){id="img8.8"}  

_Мы можем планировать, чтобы планировать, а можем осуществлять сложные действия без четкого плана._

 **Рисунок 8.8. Планы как действия и составные действия.** 

 Мы можем рассматривать план как способ объединения действий. Например, полный анализ крови можно представить в виде плана, в котором каждый компонент измерения является предполагаемым действием. Однако это очень тяжелое представление. Структура, показанная на рис. 8.8, также позволяет разложить действие на составляющие действия, но она позволяет двумя способами представить действия как часть более крупного действия: Использование ассоциации родитель-компонент хорошо подходит для простых случаев, а использование плана - для более сложных. Мы можем ограничить ассоциацию родитель-компонент иерархией, чтобы для простых случаев использовалась только ассоциация родитель-компонент.  


## 8.5 Протокол (Protocol)


## 8.6 Распределение ресурсов


## 8.7 Результаты и функции старта

## References

 1. Кэрнс, Т., А. Кейси, М. Фаулер, М. Терсц и Х. Тимими. _Модель клинических процессов Cosmos. Национальная служба здравоохранения_, Центр управления информацией, 15 Frederick Rd, Бирмингем, B15 1JD, Англия. Отчет ECBS20A и ECBS20B <http://www.sm.ic.ac.uk/medicine/cpm>, 1992. 

 2. IMC. _Общая базовая спецификация обобщённой модели_. Национальная служба здравоохранения, Центр управления информацией, 1992.  
